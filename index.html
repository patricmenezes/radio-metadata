<script>
    // Função para obter e exibir os metadados
    async function obterMetadados() {
        const timestamp = new Date().getTime(); // Gera um valor único para cada requisição
        const url = `https://raw.githubusercontent.com/patricmenezes/radio-metadata/main/metadados.json?timestamp=${timestamp}`;  // Usa o timestamp como parâmetro

        try {
            const response = await fetch(url);

            if (response.ok) {
                const dados = await response.json();

                // Preencher as informações da música na página
                document.getElementById('titulo').innerText = 'Título: ' + dados.titulo;
                document.getElementById('artista').innerText = 'Artista: ' + dados.artista;
                document.getElementById('album').innerText = 'Álbum: ' + dados.album;
                document.getElementById('ano').innerText = 'Ano: ' + dados.ano;

                // Se houver capa, exibir
                const capa = dados.capa;
                if (capa) {
                    document.getElementById('capa').src = capa;
                } else {
                    document.getElementById('capa').style.display = 'none'; // Esconder imagem se não houver
                }
            } else {
                console.error('Erro ao buscar metadados.');
            }
        } catch (err) {
            console.error('Erro ao carregar os metadados:', err);
        }
    }

    // Chama a função assim que a página carregar
    window.onload = obterMetadados;
         
    // Função para forçar o recarregamento dos metadados a cada 30 segundos
    setInterval(obterMetadados, 10000); // Atualiza a cada 30 segundos
</script>
